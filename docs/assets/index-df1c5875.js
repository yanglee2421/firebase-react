import{d as p,j as e}from"./index-3c5663aa.js";import{a as u,R as l,G as c}from"./axios-posthog-70f7ef83.js";import{u as d}from"./useQuery-0833e7ef.js";import{C as f}from"./Card-553e6ef9.js";import{C as h}from"./CardHeader-883f6d73.js";import{L as g}from"./LoadingButton-2f2888a6.js";import{C as y}from"./CardContent-bdcb1100.js";import{B as x}from"./Box-cc1663ee.js";import{D as j,G as v,a as b}from"./DataGrid-56d9124c.js";import"./createSvgIcon-64d8bfad.js";import"./ButtonBase-b325107b.js";import"./TextField-1dffdae2.js";import"./OutlinedInput-6f381e69.js";import"./useTheme-78055a87.js";import"./Modal-2852bca1.js";import"./List-d9084187.js";import"./ListContext-8af37b8a.js";import"./Transition-204cc3d3.js";import"./ownerDocument-613eb639.js";import"./ownerWindow-698471fc.js";import"./Paper-5ae54d4d.js";import"./Grow-fb25d800.js";import"./useFormControl-c7418a14.js";import"./TextareaAutosize-52674ff0.js";import"./isMuiElement-26a40ed5.js";import"./useId-ffa89aed.js";import"./Select-57b2b147.js";import"./useControlled-44d55bca.js";import"./useBaseQuery-6b077477.js";import"./utils-73056672.js";import"./Typography-21a806b1.js";import"./extendSxProp-22a70640.js";import"./Button-a5368f1e.js";import"./FormControlLabel-e5e8e3ec.js";import"./SwitchBase-202beb1c.js";import"./styled-97237192.js";import"./Badge-eea94f4b.js";import"./usePreviousProps-1ce8c076.js";import"./index-6589bd3f.js";import"./Autocomplete-f6d16510.js";import"./IconButton-4c186eb0.js";import"./Popper-ab43d1fb.js";import"./Chip-dfb7a41a.js";import"./MenuItem-068563ad.js";import"./listItemIconClasses-646ec482.js";import"./dividerClasses-e46da641.js";import"./listItemTextClasses-9174a24a.js";import"./Divider-1749b3af.js";import"./ListItemIcon-47bc48e6.js";import"./ListItemText-f91341e2.js";import"./Switch-19968508.js";import"./InputAdornment-d2d019fc.js";import"./Tooltip-71a1fab9.js";import"./Skeleton-0b17ae4f.js";import"./KeyboardArrowRight-dd70f1a2.js";import"./Toolbar-10e71301.js";function C(t){return t.filter(Boolean)}function w(t,o){const{project_id:r}=o;return u({url:`/projects/${r}/query/`,method:"POST",...t})}function _(t,o){return d({queryKey:["posthog_query",t,o],queryFn({signal:r}){return w({signal:r,data:t},o)}})}function Nr(){var n;const[t]=p(),o=t.get("event"),r=_({query:{kind:"EventsQuery",select:["*","event","person","coalesce(properties.$current_url, properties.$screen_name) -- Url / Screen","properties.$lib","timestamp"],event:o||"",properties:C([o==="$pageview"&&{key:"$current_url",value:"vsr_click",operator:"icontains",type:"event"}])},client_query_id:"",refresh:!1},{project_id:1}),s=(n=r.data)==null?void 0:n.results.map(i=>({uuid:i[0].uuid,event:i[1],url:i[3],library:i[4],time:i[5]}));return e.jsx(e.Fragment,{children:e.jsxs(f,{children:[e.jsx(h,{title:o,action:e.jsx(g,{onClick:()=>r.refetch(),variant:"contained",loading:r.isFetching,startIcon:e.jsx(l,{}),children:"reload"})}),e.jsx(y,{children:e.jsx(j,{loading:r.isPending,columns:$(),rows:s||[],getRowId:i=>i.uuid,autoHeight:!0,hideFooterPagination:!0,disableRowSelectionOnClick:!0,slots:{toolbar:q}})})]})})}function $(){return[{field:"event",type:"string",headerName:"EVENT",flex:1,sortable:!1},{field:"uuid",type:"string",headerName:"PERSON",flex:1,sortable:!1},{field:"url",type:"string",headerName:"URL",flex:1,sortable:!1},{field:"library",type:"string",headerName:"LIBRARY",width:120,sortable:!1},{field:"time",type:"string",headerName:"TIME",width:160,sortable:!1,renderCell(t){return R(t.value)}}]}function R(...t){const o=new Date(...t),r=Date.now(),s=o.getTime(),n=Math.floor((r-s)/(1e3*60*60*24));if(n)return`${n} days ago`;const i=Math.floor((r-s)/(1e3*60*60));if(i)return`${i} hours ago`;const a=Math.floor((r-s)/(1e3*60));if(a)return`${a} minutes ago`;const m=Math.floor((r-s)/1e3);return m?`${m} seconds ago`:"a few seconds ago"}function q(){return e.jsxs(x,{display:"flex",p:3,children:[e.jsx(v,{}),e.jsx(b,{sx:{ml:3}}),e.jsx(c,{sx:{ml:"auto"}})]})}export{Nr as Component};
