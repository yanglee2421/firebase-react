import{r as i,i as H,j as K,_ as S,k as ge}from"./index-39bca082.js";import{f as De,d as ve,g as ye,b as be,s as V,c as te,a as xe,r as Ie}from"./ButtonBase-befaa8cf.js";import{u as ke}from"./useTheme-248c7ca6.js";import{g as Fe,M as Oe}from"./Modal-a5c5f5b6.js";import{P as _e,o as fe,d as $e}from"./Paper-83ab9384.js";import{o as q}from"./ownerDocument-613eb639.js";import{G as ze}from"./Grow-0935a4e2.js";import{L as Ne,u as J}from"./List-a5b106e5.js";import{i as je}from"./ListContext-db138cec.js";const He=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function Z(t,e,o){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:o?null:t.firstChild}function de(t,e,o){return t===e?o?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:o?null:t.lastChild}function we(t,e){if(e===void 0)return!0;let o=t.innerText;return o===void 0&&(o=t.textContent),o=o.trim().toLowerCase(),o.length===0?!1:e.repeating?o[0]===e.keys[0]:o.indexOf(e.keys.join(""))===0}function G(t,e,o,T,b,w){let f=!1,d=b(t,e,e?o:!1);for(;d;){if(d===t.firstChild){if(f)return!1;f=!0}const u=T?!1:d.disabled||d.getAttribute("aria-disabled")==="true";if(!d.hasAttribute("tabindex")||!we(d,w)||u)d=b(t,d,o);else return d.focus(),!0}return!1}const Ke=i.forwardRef(function(e,o){const{actions:T,autoFocus:b=!1,autoFocusItem:w=!1,children:f,className:d,disabledItemsFocusable:u=!1,disableListWrap:P=!1,onKeyDown:C,variant:x="selectedMenu"}=e,F=H(e,He),g=i.useRef(null),A=i.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});De(()=>{b&&g.current.focus()},[b]),i.useImperativeHandle(T,()=>({adjustStyleForScrollbar:(n,s)=>{const c=!g.current.style.width;if(n.clientHeight<g.current.clientHeight&&c){const h=`${Fe(q(n))}px`;g.current.style[s.direction==="rtl"?"paddingLeft":"paddingRight"]=h,g.current.style.width=`calc(100% + ${h})`}return g.current}}),[]);const I=n=>{const s=g.current,c=n.key,h=q(s).activeElement;if(c==="ArrowDown")n.preventDefault(),G(s,h,P,u,Z);else if(c==="ArrowUp")n.preventDefault(),G(s,h,P,u,de);else if(c==="Home")n.preventDefault(),G(s,null,P,u,Z);else if(c==="End")n.preventDefault(),G(s,null,P,u,de);else if(c.length===1){const l=A.current,E=c.toLowerCase(),R=performance.now();l.keys.length>0&&(R-l.lastTime>500?(l.keys=[],l.repeating=!0,l.previousKeyMatched=!0):l.repeating&&E!==l.keys[0]&&(l.repeating=!1)),l.lastTime=R,l.keys.push(E);const O=h&&!l.repeating&&we(h,l);l.previousKeyMatched&&(O||G(s,h,!1,u,Z,l))?n.preventDefault():l.previousKeyMatched=!1}C&&C(n)},p=ve(g,o);let r=-1;i.Children.forEach(f,(n,s)=>{if(!i.isValidElement(n)){r===s&&(r+=1,r>=f.length&&(r=-1));return}n.props.disabled||(x==="selectedMenu"&&n.props.selected||r===-1)&&(r=s),r===s&&(n.props.disabled||n.props.muiSkipListHighlight||n.type.muiSkipListHighlight)&&(r+=1,r>=f.length&&(r=-1))});const k=i.Children.map(f,(n,s)=>{if(s===r){const c={};return w&&(c.autoFocus=!0),n.props.tabIndex===void 0&&x==="selectedMenu"&&(c.tabIndex=0),i.cloneElement(n,c)}return n});return K.jsx(Ne,S({role:"menu",ref:p,className:d,onKeyDown:I,tabIndex:b?0:-1},F,{children:k}))}),Ae=Ke;function We(t){return ye("MuiPopover",t)}be("MuiPopover",["root","paper"]);const Ue=["onEntering"],Ge=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],Ve=["slotProps"];function he(t,e){let o=0;return typeof e=="number"?o=e:e==="center"?o=t.height/2:e==="bottom"&&(o=t.height),o}function me(t,e){let o=0;return typeof e=="number"?o=e:e==="center"?o=t.width/2:e==="right"&&(o=t.width),o}function Pe(t){return[t.horizontal,t.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function ee(t){return typeof t=="function"?t():t}const Be=t=>{const{classes:e}=t;return xe({root:["root"],paper:["paper"]},We,e)},Xe=V(Oe,{name:"MuiPopover",slot:"Root",overridesResolver:(t,e)=>e.root})({}),Me=V(_e,{name:"MuiPopover",slot:"Paper",overridesResolver:(t,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Ye=i.forwardRef(function(e,o){var T,b,w;const f=ge({props:e,name:"MuiPopover"}),{action:d,anchorEl:u,anchorOrigin:P={vertical:"top",horizontal:"left"},anchorPosition:C,anchorReference:x="anchorEl",children:F,className:g,container:A,elevation:I=8,marginThreshold:p=16,open:r,PaperProps:k={},slots:n,slotProps:s,transformOrigin:c={vertical:"top",horizontal:"left"},TransitionComponent:h=ze,transitionDuration:l="auto",TransitionProps:{onEntering:E}={},disableScrollLock:R=!1}=f,O=H(f.TransitionProps,Ue),W=H(f,Ge),L=(T=s==null?void 0:s.paper)!=null?T:k,U=i.useRef(),_=ve(U,L.ref),$=S({},f,{anchorOrigin:P,anchorReference:x,elevation:I,marginThreshold:p,externalPaperSlotProps:L,transformOrigin:c,TransitionComponent:h,transitionDuration:l,TransitionProps:O}),B=Be($),X=i.useCallback(()=>{if(x==="anchorPosition")return C;const a=ee(u),y=(a&&a.nodeType===1?a:q(U.current).body).getBoundingClientRect();return{top:y.top+he(y,P.vertical),left:y.left+me(y,P.horizontal)}},[u,P.horizontal,P.vertical,C,x]),Y=i.useCallback(a=>({vertical:he(a,c.vertical),horizontal:me(a,c.horizontal)}),[c.horizontal,c.vertical]),v=i.useCallback(a=>{const m={width:a.offsetWidth,height:a.offsetHeight},y=Y(m);if(x==="none")return{top:null,left:null,transformOrigin:Pe(y)};const ie=X();let N=ie.top-y.vertical,j=ie.left-y.horizontal;const le=N+m.height,ae=j+m.width,ce=fe(ee(u)),ue=ce.innerHeight-p,pe=ce.innerWidth-p;if(p!==null&&N<p){const M=N-p;N-=M,y.vertical+=M}else if(p!==null&&le>ue){const M=le-ue;N-=M,y.vertical+=M}if(p!==null&&j<p){const M=j-p;j-=M,y.horizontal+=M}else if(ae>pe){const M=ae-pe;j-=M,y.horizontal+=M}return{top:`${Math.round(N)}px`,left:`${Math.round(j)}px`,transformOrigin:Pe(y)}},[u,x,X,Y,p]),[z,oe]=i.useState(r),D=i.useCallback(()=>{const a=U.current;if(!a)return;const m=v(a);m.top!==null&&(a.style.top=m.top),m.left!==null&&(a.style.left=m.left),a.style.transformOrigin=m.transformOrigin,oe(!0)},[v]);i.useEffect(()=>(R&&window.addEventListener("scroll",D),()=>window.removeEventListener("scroll",D)),[u,R,D]);const Se=(a,m)=>{E&&E(a,m),D()},Ee=()=>{oe(!1)};i.useEffect(()=>{r&&D()}),i.useImperativeHandle(d,()=>r?{updatePosition:()=>{D()}}:null,[r,D]),i.useEffect(()=>{if(!r)return;const a=$e(()=>{D()}),m=fe(u);return m.addEventListener("resize",a),()=>{a.clear(),m.removeEventListener("resize",a)}},[u,r,D]);let ne=l;l==="auto"&&!h.muiSupportAuto&&(ne=void 0);const Re=A||(u?q(ee(u)).body:void 0),Q=(b=n==null?void 0:n.root)!=null?b:Xe,re=(w=n==null?void 0:n.paper)!=null?w:Me,Te=J({elementType:re,externalSlotProps:S({},L,{style:z?L.style:S({},L.style,{opacity:0})}),additionalProps:{elevation:I,ref:_},ownerState:$,className:te(B.paper,L==null?void 0:L.className)}),se=J({elementType:Q,externalSlotProps:(s==null?void 0:s.root)||{},externalForwardedProps:W,additionalProps:{ref:o,slotProps:{backdrop:{invisible:!0}},container:Re,open:r},ownerState:$,className:te(B.root,g)}),{slotProps:Ce}=se,Le=H(se,Ve);return K.jsx(Q,S({},Le,!je(Q)&&{slotProps:Ce,disableScrollLock:R},{children:K.jsx(h,S({appear:!0,in:r,onEntering:Se,onExited:Ee,timeout:ne},O,{children:K.jsx(re,S({},Te,{children:F}))}))}))}),qe=Ye;function Je(t){return ye("MuiMenu",t)}be("MuiMenu",["root","paper","list"]);const Qe=["onEntering"],Ze=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],et={vertical:"top",horizontal:"right"},tt={vertical:"top",horizontal:"left"},ot=t=>{const{classes:e}=t;return xe({root:["root"],paper:["paper"],list:["list"]},Je,e)},nt=V(qe,{shouldForwardProp:t=>Ie(t)||t==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(t,e)=>e.root})({}),rt=V(Me,{name:"MuiMenu",slot:"Paper",overridesResolver:(t,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),st=V(Ae,{name:"MuiMenu",slot:"List",overridesResolver:(t,e)=>e.list})({outline:0}),it=i.forwardRef(function(e,o){var T,b;const w=ge({props:e,name:"MuiMenu"}),{autoFocus:f=!0,children:d,className:u,disableAutoFocusItem:P=!1,MenuListProps:C={},onClose:x,open:F,PaperProps:g={},PopoverClasses:A,transitionDuration:I="auto",TransitionProps:{onEntering:p}={},variant:r="selectedMenu",slots:k={},slotProps:n={}}=w,s=H(w.TransitionProps,Qe),c=H(w,Ze),h=ke(),l=h.direction==="rtl",E=S({},w,{autoFocus:f,disableAutoFocusItem:P,MenuListProps:C,onEntering:p,PaperProps:g,transitionDuration:I,TransitionProps:s,variant:r}),R=ot(E),O=f&&!P&&F,W=i.useRef(null),L=(v,z)=>{W.current&&W.current.adjustStyleForScrollbar(v,h),p&&p(v,z)},U=v=>{v.key==="Tab"&&(v.preventDefault(),x&&x(v,"tabKeyDown"))};let _=-1;i.Children.map(d,(v,z)=>{i.isValidElement(v)&&(v.props.disabled||(r==="selectedMenu"&&v.props.selected||_===-1)&&(_=z))});const $=(T=k.paper)!=null?T:rt,B=(b=n.paper)!=null?b:g,X=J({elementType:k.root,externalSlotProps:n.root,ownerState:E,className:[R.root,u]}),Y=J({elementType:$,externalSlotProps:B,ownerState:E,className:R.paper});return K.jsx(nt,S({onClose:x,anchorOrigin:{vertical:"bottom",horizontal:l?"right":"left"},transformOrigin:l?et:tt,slots:{paper:$,root:k.root},slotProps:{root:X,paper:Y},open:F,ref:o,transitionDuration:I,TransitionProps:S({onEntering:L},s),ownerState:E},c,{classes:A,children:K.jsx(st,S({onKeyDown:U,actions:W,autoFocus:f&&(_===-1||P),autoFocusItem:O,variant:r},C,{className:te(R.list,C.className),children:d}))}))}),Pt=it;export{Pt as M,Ae as a};
