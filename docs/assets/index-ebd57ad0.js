import{j as e,J as u,F as f,L as h}from"./index-e8b98d12.js";import{u as x}from"./useQuery-717224d5.js";import{a as g,R as j,G as b}from"./axios-posthog-b537598f.js";import{_ as y}from"./react-apexcharts.min-5884a9e5.js";import{u as v}from"./useTheme-c908181f.js";import{C as p}from"./Card-ae57f793.js";import{C as d}from"./CardHeader-9b22f6f9.js";import{L as C}from"./LoadingButton-4bc7adc1.js";import{C as c}from"./CardContent-204273ba.js";import{L as w}from"./Link-08b56447.js";import{B as _}from"./Box-9cab8394.js";import{D as k,G as L,a as R}from"./DataGrid-a5ab2cbb.js";import{G as m}from"./Grid-645b67ba.js";import"./useBaseQuery-47da0176.js";import"./utils-73056672.js";import"./createSvgIcon-a8638656.js";import"./ButtonBase-2b81ec0a.js";import"./TextField-6ae70472.js";import"./OutlinedInput-3410d97b.js";import"./Modal-de5beea2.js";import"./List-e4657192.js";import"./ListContext-a8fe2dd1.js";import"./Transition-59586c6e.js";import"./ownerDocument-613eb639.js";import"./ownerWindow-698471fc.js";import"./Paper-ec90ae18.js";import"./Grow-c430ea2d.js";import"./useFormControl-57458a61.js";import"./TextareaAutosize-7fbb9ac1.js";import"./isMuiElement-44cdad64.js";import"./useId-a81afe1e.js";import"./Select-38342def.js";import"./useControlled-4e65e865.js";import"./index-eaf93a5d.js";import"./Typography-1316f8d7.js";import"./extendSxProp-efd8908c.js";import"./Button-fa358941.js";import"./FormControlLabel-48bfbaab.js";import"./SwitchBase-41c26f09.js";import"./styled-dfa477a8.js";import"./Badge-2bd10f50.js";import"./usePreviousProps-fd1449e8.js";import"./Autocomplete-a9ccf9aa.js";import"./IconButton-b2546262.js";import"./Popper-517de33b.js";import"./Chip-e86bd062.js";import"./MenuItem-0dafc090.js";import"./listItemIconClasses-e5cce26f.js";import"./dividerClasses-5d67ed64.js";import"./listItemTextClasses-88d846bf.js";import"./Divider-3226fa16.js";import"./ListItemIcon-67a56fc1.js";import"./ListItemText-28f50999.js";import"./Switch-386cd75d.js";import"./InputAdornment-c0c38342.js";import"./Tooltip-ead9fa94.js";import"./Skeleton-c8d347dc.js";import"./KeyboardArrowRight-1236120c.js";import"./Toolbar-f5c2c2da.js";function F(t,{project_id:r}){return g({url:`/projects/${r}/insights/trend/`,...t})}function S(t,r){return x({queryKey:["insights_trend",t,r],queryFn({signal:o}){return F({signal:o,params:t},r)}})}function T(t){const{categories:r,series:o,loading:i,onRefresh:a,last_refresh:n,...l}=t,s=v();return e.jsx(e.Fragment,{children:e.jsxs(p,{sx:{"& .bar-chart":{padding:s.spacing(2,2.5)}},...l,children:[e.jsx(d,{title:"Trends",subheader:`Last refresh ${n.toLocaleString()}`,sx:{flexDirection:["column","row"],alignItems:["flex-start","center"],"& .MuiCardHeader-action":{mb:0},"& .MuiCardHeader-content":{mb:[2,0]}},action:e.jsx(C,{loading:i,onClick:a,color:"success",startIcon:e.jsx(j,{}),children:"refresh"})}),e.jsx(c,{children:e.jsx(y,{type:"line",height:400,series:o,options:G({theme:s,categories:r})})})]})})}function G(t){const{categories:r,theme:o}=t;return{chart:{parentHeightOffset:0,zoom:{enabled:!1},toolbar:{show:!1}},colors:["#ff9f43",u[500]],stroke:{curve:"straight"},dataLabels:{enabled:!1},markers:{strokeWidth:7,strokeOpacity:1,colors:["#ff9f43"],strokeColors:["#fff",f[100]]},grid:{padding:{top:-10},borderColor:o.palette.divider,xaxis:{lines:{show:!0}}},yaxis:{labels:{style:{colors:o.palette.text.disabled}}},xaxis:{axisBorder:{show:!1},axisTicks:{color:o.palette.divider},crosshairs:{stroke:{color:o.palette.divider}},labels:{style:{colors:o.palette.text.disabled}},categories:r}}}function D(t){const{rows:r,...o}=t;return e.jsx(e.Fragment,{children:e.jsxs(p,{...o,children:[e.jsx(d,{title:"Detailed results"}),e.jsx(c,{children:e.jsx(k,{columns:P(),rows:r,getRowId:i=>i.label,autoHeight:!0,hideFooterPagination:!0,disableRowSelectionOnClick:!0,slots:{toolbar:I},slotProps:{baseFormControl:{}}})})]})})}function P(){return[{field:"label",type:"string",flex:1,headerName:"SERIES",headerAlign:"left",align:"left",sortable:!1,renderCell(t){const r=new URLSearchParams;r.set("event",t.value);const o=r.toString();return e.jsx(w,{component:h,to:{pathname:"/posthog-events",search:o},underline:"always",children:t.value})}},{field:"count",type:"string",flex:1,headerName:"TOTAL SUM",headerAlign:"left",align:"left",sortable:!1}]}function I(){return e.jsx(e.Fragment,{children:e.jsxs(_,{display:"flex",p:4,children:[e.jsx(L,{}),e.jsx(R,{sx:{ml:3}}),e.jsx(b,{sx:{ml:"auto"}})]})})}function qe(){var r,o,i,a,n,l,s;const t=S({insight:"TRENDS",date_from:"-7d",entity_type:"events",interval:"day",display:"ActionsLineGraph",compare:"",session_id:"",client_query_id:"",refresh:!0,events:JSON.stringify([{order:0,type:"events",id:"$pageview",name:"$pageview",math:"total",properties:[{key:"$current_url",value:"vsr_click",operator:"icontains",type:"event"}]},{order:1,type:"events",id:"WarpDrivenVSRView",name:"WarpDrivenVSRView",math:"total"}])},{project_id:1});return e.jsx(e.Fragment,{children:e.jsxs(m,{container:!0,spacing:6,p:6,children:[e.jsx(m,{item:!0,xs:12,children:e.jsx(T,{loading:t.isFetching,onRefresh:()=>t.refetch(),categories:((r=t.data)==null?void 0:r.result[0].labels)||[],last_refresh:new Date(((o=t.data)==null?void 0:o.last_refresh)||""),series:[{name:(i=t.data)==null?void 0:i.result[0].label,data:((a=t.data)==null?void 0:a.result[0].data)||[]},{name:(n=t.data)==null?void 0:n.result[1].label,data:((l=t.data)==null?void 0:l.result[1].data)||[]}]})}),e.jsx(m,{item:!0,xs:12,children:e.jsx(D,{rows:((s=t.data)==null?void 0:s.result)||[]})})]})})}export{qe as Component};
