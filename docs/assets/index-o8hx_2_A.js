import{j as r,c as C,g as L,d as x,z as N,o as R,A as j}from"./index-NOl4DqEL.js";import{u as H,F as b}from"./index.esm-PFAWtegw.js";import{o as F,c as I,a as M}from"./index.esm-DWm3QBwm.js";import"./Editor-Leo8qfg-.js";import{I as E}from"./ItemText-cowRz3qq.js";import"./SkeletonCard-94_y6wPc.js";import{u as w}from"./useMutation-q_AUA4Pg.js";import"./copy-btn-XFFgqXmR.js";import{r as O,g as V,u as B,a as D}from"./index.esm2017-FCs6mSMr.js";import{L as A}from"./LoadingButton-XTRyP2te.js";import{c as S}from"./createSvgIcon-Pd_Bs2QI.js";import{A as P,s as v}from"./stringToColor-ZUzEvLii.js";import{S as k}from"./Stack-W9-MNvce.js";import{C as g,a as U}from"./CardHeader-QBBSwnV9.js";import{C as y}from"./CardContent-o2_FOQpp.js";import{G as m}from"./Grid-V6WK4ri_.js";import{C as $}from"./CardActions-_wXGfAGR.js";import{B as G}from"./Button-5LEC6PDI.js";import{R as T}from"./RefreshOutlined-AhGM6oN4.js";import"./fabric-Y98Y_bQ5.js";import"./index-9djbFzGf.js";import"./TextField-nQcERWWz.js";import"./ButtonBase-7zDRXYUG.js";import"./OutlinedInput-IM8tDleW.js";import"./useTheme-GuQ9oku8.js";import"./Modal-Xh0EGuVc.js";import"./Backdrop-NlEYlFVr.js";import"./utils-7yFeARfI.js";import"./Transition-z-EYftQ6.js";import"./ownerDocument-bIJBxlvi.js";import"./ownerWindow-LT9-6hbI.js";import"./Portal-kQ69nwgj.js";import"./isHostComponent-jcd54X0C.js";import"./Paper-61t9uWkm.js";import"./Grow-5aA_Tu-g.js";import"./List-aUEAzYML.js";import"./ListContext-kicnJyXl.js";import"./useFormControl-1tOr1C5f.js";import"./TextareaAutosize-bstcyYhk.js";import"./isMuiElement-7BVEk7WY.js";import"./useControlled-zkqhxYod.js";import"./Box-ECGFyPyF.js";import"./extendSxProp-67_cfwlG.js";import"./Skeleton-aUiZU9k7.js";import"./utils-1RRThafF.js";import"./Tooltip-NFGqnXhD.js";import"./Popper-JhJLztZU.js";import"./IconButton-Ji51lX6_.js";import"./CircularProgress-zUVyPBwz.js";import"./styled-BTqVtLFW.js";import"./Typography-PeIQuIa_.js";const q=S(r.jsx("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm2 16H5V5h11.17L19 7.83V19zm-7-7c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3zM6 6h9v4H6z"}),"SaveOutlined"),_=S(r.jsx("path",{d:"M9 16h6v-6h4l-7-7-7 7h4v6zm3-10.17L14.17 8H13v6h-2V8H9.83L12 5.83zM5 18h14v2H5z"}),"UploadOutlined");function J(){const[,t]=C();return w({async mutationFn(a){const o=L(x).currentUser;if(!o)throw new Error("Not authorization");const e=O(V(x),`user/avatar/${o.uid}`);await B(e,a);const n=await D(e);return await N(o,{photoURL:n}),o},onError(a){console.error(a)},onSuccess(){t(Date.now())}})}function K(){const t=J();return r.jsxs(A,{component:"label",loading:t.isPending,variant:"contained",startIcon:r.jsx(_,{}),children:[r.jsx("input",{value:"",onChange:a=>{const o=a.target.files;if(!o)return;const e=o[0];e&&t.mutate(e)},type:"file",accept:"image/*",hidden:!0}),"upload"]})}function _r(){var p,c,l,u,d,h,f;const[t,a]=C(),o=H({defaultValues:{displayName:((p=t.currentUser)==null?void 0:p.displayName)||""},resolver:F(I().shape({displayName:M().max(128).required()}))}),e=w({async mutationFn({displayName:s}){const i=t.currentUser;if(!i)throw new Error("Not authorization");return await N(i,{displayName:s}),t},onError(s){j.error(s.message)},onSuccess(s){var i;a(Date.now()),o.reset({displayName:((i=s.currentUser)==null?void 0:i.displayName)||""}),j.success("Save successlly!")}}),n=o.handleSubmit(s=>{e.mutate(s)}),z=()=>{o.reset()};return r.jsx(r.Fragment,{children:r.jsxs(k,{spacing:6,padding:4,children:[r.jsxs(g,{children:[r.jsx(U,{}),r.jsx(y,{children:r.jsx(m,{container:!0,spacing:4})})]}),r.jsx(b,{...o,children:r.jsxs(g,{children:[r.jsx(U,{title:"User profile",subheader:"Update you profile",avatar:r.jsx(P,{src:((c=t.currentUser)==null?void 0:c.photoURL)||"",alt:"avator",sx:{color:(l=t.currentUser)!=null&&l.displayName?v(t.currentUser.displayName||""):void 0,bgcolor:(u=t.currentUser)!=null&&u.displayName?R(v(t.currentUser.displayName||""),.12):void 0},children:(f=(h=(d=t.currentUser)==null?void 0:d.displayName)==null?void 0:h.at(0))==null?void 0:f.toUpperCase()}),action:r.jsx(K,{})}),r.jsx(y,{children:r.jsx(m,{container:!0,spacing:4,children:r.jsx(m,{item:!0,xs:12,sm:6,children:r.jsx(E,{name:"displayName",label:"Display Name"})})})}),r.jsxs($,{children:[r.jsx(A,{onClick:n,loading:e.isPending,variant:"contained",startIcon:r.jsx(q,{}),children:"save"}),r.jsx(G,{onClick:z,variant:"outlined",startIcon:r.jsx(T,{}),children:"reset"})]})]})})]})})}export{_r as Component};
