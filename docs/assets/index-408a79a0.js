import{d as p,j as e}from"./index-e8b98d12.js";import{a as u,R as l,G as c}from"./axios-posthog-b537598f.js";import{u as d}from"./useQuery-717224d5.js";import{C as f}from"./Card-ae57f793.js";import{C as h}from"./CardHeader-9b22f6f9.js";import{L as g}from"./LoadingButton-4bc7adc1.js";import{C as y}from"./CardContent-204273ba.js";import{B as x}from"./Box-9cab8394.js";import{D as j,G as v,a as b}from"./DataGrid-a5ab2cbb.js";import"./createSvgIcon-a8638656.js";import"./ButtonBase-2b81ec0a.js";import"./TextField-6ae70472.js";import"./OutlinedInput-3410d97b.js";import"./useTheme-c908181f.js";import"./Modal-de5beea2.js";import"./List-e4657192.js";import"./ListContext-a8fe2dd1.js";import"./Transition-59586c6e.js";import"./ownerDocument-613eb639.js";import"./ownerWindow-698471fc.js";import"./Paper-ec90ae18.js";import"./Grow-c430ea2d.js";import"./useFormControl-57458a61.js";import"./TextareaAutosize-7fbb9ac1.js";import"./isMuiElement-44cdad64.js";import"./useId-a81afe1e.js";import"./Select-38342def.js";import"./useControlled-4e65e865.js";import"./useBaseQuery-47da0176.js";import"./utils-73056672.js";import"./Typography-1316f8d7.js";import"./extendSxProp-efd8908c.js";import"./Button-fa358941.js";import"./FormControlLabel-48bfbaab.js";import"./SwitchBase-41c26f09.js";import"./styled-dfa477a8.js";import"./Badge-2bd10f50.js";import"./usePreviousProps-fd1449e8.js";import"./index-eaf93a5d.js";import"./Autocomplete-a9ccf9aa.js";import"./IconButton-b2546262.js";import"./Popper-517de33b.js";import"./Chip-e86bd062.js";import"./MenuItem-0dafc090.js";import"./listItemIconClasses-e5cce26f.js";import"./dividerClasses-5d67ed64.js";import"./listItemTextClasses-88d846bf.js";import"./Divider-3226fa16.js";import"./ListItemIcon-67a56fc1.js";import"./ListItemText-28f50999.js";import"./Switch-386cd75d.js";import"./InputAdornment-c0c38342.js";import"./Tooltip-ead9fa94.js";import"./Skeleton-c8d347dc.js";import"./KeyboardArrowRight-1236120c.js";import"./Toolbar-f5c2c2da.js";function C(t){return t.filter(Boolean)}function w(t,o){const{project_id:r}=o;return u({url:`/projects/${r}/query/`,method:"POST",...t})}function _(t,o){return d({queryKey:["posthog_query",t,o],queryFn({signal:r}){return w({signal:r,data:t},o)}})}function Nr(){var n;const[t]=p(),o=t.get("event"),r=_({query:{kind:"EventsQuery",select:["*","event","person","coalesce(properties.$current_url, properties.$screen_name) -- Url / Screen","properties.$lib","timestamp"],event:o||"",properties:C([o==="$pageview"&&{key:"$current_url",value:"vsr_click",operator:"icontains",type:"event"}])},client_query_id:"",refresh:!1},{project_id:1}),s=(n=r.data)==null?void 0:n.results.map(i=>({uuid:i[0].uuid,event:i[1],url:i[3],library:i[4],time:i[5]}));return e.jsx(e.Fragment,{children:e.jsxs(f,{children:[e.jsx(h,{title:o,action:e.jsx(g,{onClick:()=>r.refetch(),variant:"contained",loading:r.isFetching,startIcon:e.jsx(l,{}),children:"reload"})}),e.jsx(y,{children:e.jsx(j,{loading:r.isPending,columns:$(),rows:s||[],getRowId:i=>i.uuid,autoHeight:!0,hideFooterPagination:!0,disableRowSelectionOnClick:!0,slots:{toolbar:q}})})]})})}function $(){return[{field:"event",type:"string",headerName:"EVENT",flex:1,sortable:!1},{field:"uuid",type:"string",headerName:"PERSON",flex:1,sortable:!1},{field:"url",type:"string",headerName:"URL",flex:1,sortable:!1},{field:"library",type:"string",headerName:"LIBRARY",width:120,sortable:!1},{field:"time",type:"string",headerName:"TIME",width:160,sortable:!1,renderCell(t){return R(t.value)}}]}function R(...t){const o=new Date(...t),r=Date.now(),s=o.getTime(),n=Math.floor((r-s)/(1e3*60*60*24));if(n)return`${n} days ago`;const i=Math.floor((r-s)/(1e3*60*60));if(i)return`${i} hours ago`;const a=Math.floor((r-s)/(1e3*60));if(a)return`${a} minutes ago`;const m=Math.floor((r-s)/1e3);return m?`${m} seconds ago`:"a few seconds ago"}function q(){return e.jsxs(x,{display:"flex",p:3,children:[e.jsx(v,{}),e.jsx(b,{sx:{ml:3}}),e.jsx(c,{sx:{ml:"auto"}})]})}export{Nr as Component};
