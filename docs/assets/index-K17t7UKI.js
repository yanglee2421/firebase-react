import{j as t,n as w,t as f}from"./index-i_8Mq8d7.js";import{u as z,F as b}from"./index.esm-d8OSjBUt.js";import{o as R,c as H,a as F}from"./index.esm-fsYUTWrJ.js";import{b as y,g as I,a as x,d as N,u as M}from"./useThemeStore-6ny1RY3v.js";import"./Editor-LiHX0ujO.js";import{I as E}from"./item-text-k7PEUhoX.js";import"./SkeletonCard-i2FP52Xo.js";import{u as A}from"./useMutation-q92KJpwO.js";import"./copy-btn-svsn-xG2.js";import{r as O,g as V,u as B,a as D}from"./index.esm2017-wJuXJsKV.js";import{L as C}from"./LoadingButton-W9j6SnQ-.js";import{c as L}from"./createSvgIcon-1v6nwHji.js";import{A as P,s as j}from"./stringToColor-kpTQeB8B.js";import{S as k}from"./Stack-BMrJxyW7.js";import{C as v,a as g,b as U}from"./CardHeader-tfAFOodb.js";import{G as m}from"./Grid-ybYN5Yb9.js";import{C as $}from"./CardActions-SO-7t05Z.js";import{B as G}from"./Button-DPYJJStb.js";import{R as T}from"./RefreshOutlined-wi2Bq58b.js";import"./fabric-Y98Y_bQ5.js";import"./index-9djbFzGf.js";import"./TextField-Pf3rFH9u.js";import"./ButtonBase-uYhudd6L.js";import"./OutlinedInput-nUsPaK_9.js";import"./useTheme-VwSl1BVx.js";import"./Modal-ipA_bDCo.js";import"./Backdrop-G__DNy5w.js";import"./utils-7yFeARfI.js";import"./Transition-UBzSWZPO.js";import"./ownerDocument-bIJBxlvi.js";import"./ownerWindow-LT9-6hbI.js";import"./Portal-LD8s9PHd.js";import"./isHostComponent-jcd54X0C.js";import"./Paper-tGdyCpXi.js";import"./Grow-yYZAvTr1.js";import"./List-nobJWEIZ.js";import"./ListContext-pdE1xoU7.js";import"./useFormControl-aryFfixP.js";import"./TextareaAutosize-Q1_8JLEV.js";import"./isMuiElement-m5dDChx8.js";import"./useControlled-Kod5jKxW.js";import"./Skeleton-hJ6YfT-P.js";import"./utils-1RRThafF.js";import"./Tooltip-pqq4A8Gm.js";import"./Popper-Q1bNnGRX.js";import"./IconButton-k9acBlzF.js";import"./CircularProgress-cbwqKW6_.js";import"./styled-LQggPOZ5.js";import"./extendSxProp-s9h8BPvy.js";import"./Typography-A230U9pa.js";const q=L(t.jsx("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm2 16H5V5h11.17L19 7.83V19zm-7-7c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3zM6 6h9v4H6z"}),"SaveOutlined"),_=L(t.jsx("path",{d:"M9 16h6v-6h4l-7-7-7 7h4v6zm3-10.17L14.17 8H13v6h-2V8H9.83L12 5.83zM5 18h14v2H5z"}),"UploadOutlined");function J(){const r=y(a=>a.setLastUpdateAt);return A({async mutationFn(a){const o=I(x).currentUser;if(!o)throw new Error("Not authorization");const s=O(V(x),`user/avatar/${o.uid}`);await B(s,a);const n=await D(s);return await N(o,{photoURL:n}),o},onError(a){console.error(a)},onSuccess(){r(Date.now())}})}function K(){const r=J();return t.jsxs(C,{component:"label",loading:r.isPending,variant:"contained",startIcon:t.jsx(_,{}),children:[t.jsx("input",{value:"",onChange:a=>{const o=a.target.files;if(!o)return;const s=o[0];s&&r.mutate(s)},type:"file",accept:"image/*",hidden:!0}),"upload"]})}function qt(){var p,c,u,d,l,h;const r=M(),a=z({defaultValues:{displayName:((p=r.currentUser)==null?void 0:p.displayName)||""},resolver:R(H().shape({displayName:F().max(128).required()}))}),o=y(e=>e.setLastUpdateAt),s=A({async mutationFn({displayName:e}){const i=r.currentUser;if(!i)throw new Error("Not authorization");return await N(i,{displayName:e}),r},onError(e){f.error(e.message)},onSuccess(e){var i;o(Date.now()),a.reset({displayName:((i=e.currentUser)==null?void 0:i.displayName)||""}),f.success("Save successlly!")}}),n=a.handleSubmit(e=>{s.mutate(e)}),S=()=>{a.reset()};return t.jsx(t.Fragment,{children:t.jsxs(k,{spacing:6,padding:4,children:[t.jsxs(v,{children:[t.jsx(g,{}),t.jsx(U,{children:t.jsx(m,{container:!0,spacing:4})})]}),t.jsx(b,{...a,children:t.jsxs(v,{children:[t.jsx(g,{title:"User profile",subheader:"Update you profile",avatar:t.jsx(P,{src:((c=r.currentUser)==null?void 0:c.photoURL)||"",alt:"avator",sx:{color:(u=r.currentUser)!=null&&u.displayName?j(r.currentUser.displayName.at(0)||""):void 0,bgcolor:(d=r.currentUser)!=null&&d.displayName?w(j(r.currentUser.displayName.at(0)||""),.12):void 0},children:(h=(l=r.currentUser)==null?void 0:l.displayName)==null?void 0:h.at(0)}),action:t.jsx(K,{})}),t.jsx(U,{children:t.jsx(m,{container:!0,spacing:4,children:t.jsx(m,{item:!0,xs:12,sm:6,children:t.jsx(E,{name:"displayName",label:"Display Name"})})})}),t.jsxs($,{children:[t.jsx(C,{onClick:n,loading:s.isPending,variant:"contained",startIcon:t.jsx(q,{}),children:"save"}),t.jsx(G,{onClick:S,variant:"outlined",startIcon:t.jsx(T,{}),children:"reset"})]})]})})]})})}export{qt as Component};
