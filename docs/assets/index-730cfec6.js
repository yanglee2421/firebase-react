import{j as e,K as u,G as f}from"./index-3c5663aa.js";import{u as h}from"./useQuery-0833e7ef.js";import{a as x,R as g,G as b}from"./axios-posthog-70f7ef83.js";import{_ as j}from"./react-apexcharts.min-f1b10e4e.js";import{u as y}from"./useTheme-78055a87.js";import{C as p}from"./Card-553e6ef9.js";import{C as d}from"./CardHeader-883f6d73.js";import{L as v}from"./LoadingButton-2f2888a6.js";import{C as c}from"./CardContent-bdcb1100.js";import{B as C}from"./Box-cc1663ee.js";import{D as _,G as w,a as k}from"./DataGrid-56d9124c.js";import{G as m}from"./Grid-b76de45e.js";import"./useBaseQuery-6b077477.js";import"./utils-73056672.js";import"./createSvgIcon-64d8bfad.js";import"./ButtonBase-b325107b.js";import"./TextField-1dffdae2.js";import"./OutlinedInput-6f381e69.js";import"./Modal-2852bca1.js";import"./List-d9084187.js";import"./ListContext-8af37b8a.js";import"./Transition-204cc3d3.js";import"./ownerDocument-613eb639.js";import"./ownerWindow-698471fc.js";import"./Paper-5ae54d4d.js";import"./Grow-fb25d800.js";import"./useFormControl-c7418a14.js";import"./TextareaAutosize-52674ff0.js";import"./isMuiElement-26a40ed5.js";import"./useId-ffa89aed.js";import"./Select-57b2b147.js";import"./useControlled-44d55bca.js";import"./index-6589bd3f.js";import"./Typography-21a806b1.js";import"./extendSxProp-22a70640.js";import"./Button-a5368f1e.js";import"./FormControlLabel-e5e8e3ec.js";import"./SwitchBase-202beb1c.js";import"./styled-97237192.js";import"./Badge-eea94f4b.js";import"./usePreviousProps-1ce8c076.js";import"./Autocomplete-f6d16510.js";import"./IconButton-4c186eb0.js";import"./Popper-ab43d1fb.js";import"./Chip-dfb7a41a.js";import"./MenuItem-068563ad.js";import"./listItemIconClasses-646ec482.js";import"./dividerClasses-e46da641.js";import"./listItemTextClasses-9174a24a.js";import"./Divider-1749b3af.js";import"./ListItemIcon-47bc48e6.js";import"./ListItemText-f91341e2.js";import"./Switch-19968508.js";import"./InputAdornment-d2d019fc.js";import"./Tooltip-71a1fab9.js";import"./Skeleton-0b17ae4f.js";import"./KeyboardArrowRight-dd70f1a2.js";import"./Toolbar-10e71301.js";function R(t,{project_id:o}){return x({url:`/projects/${o}/insights/trend/`,...t})}function T(t,o){return h({queryKey:["insights_trend",t,o],queryFn({signal:r}){return R({signal:r,params:t},o)}})}function F(t){const{categories:o,series:r,loading:i,onRefresh:a,last_refresh:n,...l}=t,s=y();return e.jsx(e.Fragment,{children:e.jsxs(p,{sx:{"& .bar-chart":{padding:s.spacing(2,2.5)}},...l,children:[e.jsx(d,{title:"Trends",subheader:`Last refresh ${n.toLocaleString()}`,sx:{flexDirection:["column","row"],alignItems:["flex-start","center"],"& .MuiCardHeader-action":{mb:0},"& .MuiCardHeader-content":{mb:[2,0]}},action:e.jsx(v,{loading:i,onClick:a,color:"success",startIcon:e.jsx(g,{}),children:"refresh"})}),e.jsx(c,{children:e.jsx(j,{type:"line",height:400,series:r,options:G({theme:s,categories:o})})})]})})}function G(t){const{categories:o,theme:r}=t;return{chart:{parentHeightOffset:0,zoom:{enabled:!1},toolbar:{show:!1}},colors:["#ff9f43",u[500]],stroke:{curve:"straight"},dataLabels:{enabled:!1},markers:{strokeWidth:7,strokeOpacity:1,colors:["#ff9f43"],strokeColors:["#fff",f[100]]},grid:{padding:{top:-10},borderColor:r.palette.divider,xaxis:{lines:{show:!0}}},yaxis:{labels:{style:{colors:r.palette.text.disabled}}},xaxis:{axisBorder:{show:!1},axisTicks:{color:r.palette.divider},crosshairs:{stroke:{color:r.palette.divider}},labels:{style:{colors:r.palette.text.disabled}},categories:o}}}function S(t){const{rows:o,...r}=t;return e.jsx(e.Fragment,{children:e.jsxs(p,{...r,children:[e.jsx(d,{title:"Detailed results"}),e.jsx(c,{children:e.jsx(_,{columns:D(),rows:o,getRowId:i=>i.label,autoHeight:!0,hideFooterPagination:!0,disableRowSelectionOnClick:!0,slots:{toolbar:L},slotProps:{baseFormControl:{}}})})]})})}function D(){return[{field:"label",type:"string",flex:1,headerName:"SERIES",headerAlign:"left",align:"left",sortable:!1},{field:"count",type:"string",flex:1,headerName:"TOTAL SUM",headerAlign:"left",align:"left",sortable:!1}]}function L(){return e.jsx(e.Fragment,{children:e.jsxs(C,{display:"flex",p:4,children:[e.jsx(w,{}),e.jsx(k,{sx:{ml:3}}),e.jsx(b,{sx:{ml:"auto"}})]})})}function He(){var o,r,i,a,n,l,s;const t=T({insight:"TRENDS",date_from:"-7d",entity_type:"events",interval:"day",display:"ActionsLineGraph",compare:"",session_id:"",client_query_id:"",refresh:!0,events:JSON.stringify([{order:0,type:"events",id:"$pageview",name:"$pageview",math:"total",properties:[{key:"$current_url",value:"vsr_click",operator:"icontains",type:"event"}]},{order:1,type:"events",id:"WarpDrivenVSRView",name:"WarpDrivenVSRView",math:"total"}])},{project_id:1});return e.jsx(e.Fragment,{children:e.jsxs(m,{container:!0,spacing:6,p:6,children:[e.jsx(m,{item:!0,xs:12,children:e.jsx(F,{loading:t.isFetching,onRefresh:()=>t.refetch(),categories:((o=t.data)==null?void 0:o.result[0].labels)||[],last_refresh:new Date(((r=t.data)==null?void 0:r.last_refresh)||""),series:[{name:(i=t.data)==null?void 0:i.result[0].label,data:((a=t.data)==null?void 0:a.result[0].data)||[]},{name:(n=t.data)==null?void 0:n.result[1].label,data:((l=t.data)==null?void 0:l.result[1].data)||[]}]})}),e.jsx(m,{item:!0,xs:12,children:e.jsx(S,{rows:((s=t.data)==null?void 0:s.result)||[]})})]})})}export{He as Component};
