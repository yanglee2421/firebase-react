var f=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};var n=(e,t,r)=>(f(e,t,"read from private field"),r?r.call(e):t.get(e)),c=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},g=(e,t,r,a)=>(f(e,t,"write to private field"),a?a.call(e,r):t.set(e,r),r);var x=(e,t,r,a)=>({set _(i){g(e,t,i,r)},get _(){return n(e,t,a)}});import{a as C,R as u,j as o,A as y}from"./index-y-D59f-l.js";import{u as w}from"./useQuery-T8jY0AKm.js";import"./Editor-ViiN9fnC.js";import"./localforage-Z2xZRT0t.js";import"./copy-btn-uBI7Ylk1.js";import{B as A}from"./Button-FEano4Rr.js";import{B as h}from"./Box-gGW_-ZGs.js";import{C as v}from"./Card-gq2DRxhC.js";import{C as M}from"./CardHeader-5psyu3_J.js";import{D as k,G as z,a as B}from"./DataGrid-UVgLdkEj.js";import{T as I}from"./TextField-AbjQ87N5.js";import{S as N}from"./Search-sAtmjwxE.js";import{I as P}from"./IconButton-7a_i6BvZ.js";import{C as D}from"./Close-LY8tNdc6.js";import"./fabric-Y98Y_bQ5.js";import"./useBaseQuery-htmWwMxe.js";import"./utils-1RRThafF.js";import"./index-9djbFzGf.js";import"./createSvgIcon-zvISoHuV.js";import"./TransitionGroupContext-y5PnIpQc.js";import"./Tooltip-8p0NfUSG.js";import"./useTheme-vEkUmAeO.js";import"./Popper-2WSwKma0.js";import"./ownerDocument-bIJBxlvi.js";import"./Portal-pE_ByGME.js";import"./isHostComponent-jcd54X0C.js";import"./useControlled-MDGVTukE.js";import"./ButtonBase-I5K-Fali.js";import"./Grow-XbrmT_k2.js";import"./utils-7yFeARfI.js";import"./Transition-e2d74KiK.js";import"./extendSxProp-keH6JwdC.js";import"./Paper-cWqnbJ1A.js";import"./Typography-lsV97rWU.js";import"./Badge-HG2Z5jcQ.js";import"./usePreviousProps-OyyhkYsp.js";import"./OutlinedInput-3JaT48Fv.js";import"./Modal-WhXy9qwD.js";import"./Backdrop-EpG-_wG6.js";import"./ownerWindow-LT9-6hbI.js";import"./List-d5ooj-Jo.js";import"./ListContext-jXuE6Pjc.js";import"./useFormControl-54SyaaD4.js";import"./TextareaAutosize-i_xNwxy6.js";import"./Autocomplete-90mQc3yc.js";import"./Select-fELxCip1.js";import"./Chip-Nc9hW50w.js";import"./MenuItem-tItT6Bcs.js";import"./listItemIconClasses-xxwh6Z5X.js";import"./dividerClasses-MGlbd6Gb.js";import"./listItemTextClasses-c0uXHpDl.js";import"./styled-fGWyf-cz.js";import"./Divider-CKLj_0cS.js";import"./ListItemIcon-l-cPlUmw.js";import"./ListItemText-RJmgslPu.js";import"./Checkbox-O98GrO-a.js";import"./SwitchBase-bYSMwn7K.js";import"./Switch-wlaYg02J.js";import"./InputAdornment-Sc-uI9Gk.js";import"./Stack-8198dFrY.js";import"./Skeleton-TKH_1Bl-.js";import"./CircularProgress-0PcbA24j.js";import"./KeyboardArrowRight-8wHH-LCS.js";import"./Toolbar-mHvMlBto.js";import"./isMuiElement-8MWP4zlS.js";function G(e){return C({url:"/table",...e})}var m,s,p;class R{constructor(){c(this,m,new Set);c(this,s,0);c(this,p,{count:n(this,s)})}subscribe(t){return n(this,m).add(t),console.log("subscribe"),()=>{n(this,m).delete(t),console.log("unsubscribe")}}getSnapshot(){return Object.is(n(this,s),n(this,p).count)||g(this,p,{...n(this,p),count:n(this,s)}),n(this,p)}dispatch(){n(this,m).forEach(t=>{x(this,s)._++,t()})}}m=new WeakMap,s=new WeakMap,p=new WeakMap;const l=new R;function T(){const e=u.useSyncExternalStore(l.subscribe.bind(l),l.getSnapshot.bind(l)),t=()=>{l.dispatch()};return o.jsx(A,{onClick:t,variant:"outlined",children:e.count})}function E(e){return w({queryKey:["table_get",e.params],queryFn({signal:t}){return console.log("fetching"),G({signal:t,...e})},placeholderData:y})}function Ze(){const[e,t]=u.useState({page:0,pageSize:20}),[r,a]=u.useState(""),{data:i,isPending:S}=E({params:{page:e.page+1,pageSize:e.pageSize,name:r}});console.log(i);const[b,j]=u.useState([]);return o.jsxs(h,{p:2,children:[o.jsx(T,{}),o.jsxs(v,{children:[o.jsx(M,{title:"Quick Filter"}),o.jsx(h,{height:500,children:o.jsx(k,{loading:S,columns:F(),rows:(i==null?void 0:i.rows)||[],getRowId:d=>d.id,paginationMode:"server",rowCount:(i==null?void 0:i.total)||0,pageSizeOptions:[20,50,100],paginationModel:e,onPaginationModelChange:t,checkboxSelection:!0,rowSelectionModel:b,onRowSelectionModelChange:j,slots:{toolbar:Q},slotProps:{baseButton:{variant:"outlined"},toolbar:{value:r,onChange(d){a(d.target.value)},onClear(){a("")}}}})})]})]})}function F(){return[{headerName:"ID",type:"number",field:"id",width:80,headerAlign:"center",align:"center"},{headerName:"Name",type:"string",field:"name",flex:1,headerAlign:"center",align:"center"},{headerName:"Age",type:"string",field:"age",flex:1,headerAlign:"center",align:"center"},{headerName:"Role",type:"string",field:"role",flex:1,headerAlign:"center",align:"center"},{headerName:"Avator",type:"string",field:"avator",flex:1,headerAlign:"center",align:"center"},{headerName:"Email",type:"string",field:"email",flex:1,headerAlign:"center",align:"center"}]}function Q(e){const{value:t,onChange:r,onClear:a}=e;return o.jsxs(h,{sx:{display:"flex",flexWrap:"wrap",alignItems:"center",gap:2,p(i){return i.spacing(2,5,4,5)}},children:[o.jsx(z,{}),o.jsx(B,{}),o.jsx(I,{value:t,onChange:r,placeholder:"Search...",size:"small",sx:{ml:"auto",width:{xs:1,sm:"auto"},"& .MuiInputBase-root > svg":{mr:2}},InputProps:{startAdornment:o.jsx(N,{fontSize:"small"}),endAdornment:o.jsx(P,{onClick:a,size:"small",children:o.jsx(D,{fontSize:"small"})})}})]})}export{Ze as Component};
